suite: Control Ingress Configuation
templates:
  - ingress-control.yaml
tests:
  - it: should be disabled by default
    asserts:
      - hasDocuments:
          count: 0
  - it: should provide a working Ingress when enabled
    set:
      control:
        ingress:
          enabled: true
    asserts:
      - containsDocument:
          kind: Ingress
          apiVersion: networking.k8s.io/v1
      - equal:
          path: spec.rules[0].http.paths[0].backend.service.port.number
          value: 9090
